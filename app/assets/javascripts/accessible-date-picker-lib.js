!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.datepicker=t():e.datepicker=t()}(self,(function(){return function(){"use strict";var e={d:function(t,a){for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{default:function(){return a}});var a=function(e){var t,a,n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Date picker not configured correctly");if(t={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},a={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayAbbr:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],buttons:{previous:"Previous",next:"Next",close:"Cancel",dialogTrigger:"Choose date"},aria:{previousMonth:"Previous month",nextMonth:"Next month",dayInPast:"You cannot select a day before",dayInFuture:"You cannot select a day after"}},cy:{days:["Dydd Sul","Dydd Llun","Dydd Mawrth","Dydd Mercher","Dydd Iau","Dydd Gwener","Dydd Sadwrn"],dayAbbr:["Su","Ll","Ma","Me","Ia","Gw","Sa"],months:["Ionawr","Chwefror","Mawrth","Ebrill","Mai","Mehefin","Gorffennaf","Awst","Medi","Hydref","Tachwedd","Rhagfyr"],buttons:{previous:"Blaenorol",next:"Nesaf",close:"Wedi'i ganslo",dialogTrigger:"Dewiswch ddyddiad"},aria:{previousMonth:"Mis blaenorol",nextMonth:"Mis nesaf",dayInPast:"Ni allwch ddewis ddiwrnod cynt",dayInFuture:"Ni allwch ddewis ddiwrnod ar Ã´l"}}},n={container:e,buttons:{},table:{},inputs:{day:e.querySelector(".date-picker-day"),month:e.querySelector(".date-picker-month"),year:e.querySelector(".date-picker-year")},ariaLiveMessage:null,heading:{},dialog:{}},o={isOpen:!1,isPreviousEnabled:!0,isNextEnabled:!0,maxDate:i.maxDate||null,minDate:i.minDate||null,language:i.language||"en",focusedDate:new Date,days:[]},a.ni=a.en,!(n.inputs.month&&n.inputs.year&&n.inputs.day&&i))throw new Error("Date picker not configured correctly");if(!(o.maxDate instanceof Date||null===o.maxDate)||!(o.minDate instanceof Date||null===o.minDate))throw new Error("Date picker min and max dates must be of type Date");if(o.minDate&&o.maxDate&&o.minDate>=o.maxDate)throw new Error("Date picker min date cannot be greater than max date");if(!(Object.keys(a).indexOf(o.language)>-1))throw new Error("Date picker does not currently support language "+o.language);function s(e){return e.getDate()+" "+a[o.language].months[e.getMonth()]+" "+e.getFullYear()}function d(){return 11===o.focusedDate.getMonth()?new Date(o.focusedDate.getFullYear()+1,0,1):new Date(o.focusedDate.getFullYear(),o.focusedDate.getMonth()+1,1)}function r(){return 1===o.focusedDate.getMonth()?new Date(o.focusedDate.getFullYear()-1,12,1):new Date(o.focusedDate.getFullYear(),o.focusedDate.getMonth()-1,1)}function u(){var e,t={day:n.inputs.day.value,month:n.inputs.month.value,year:n.inputs.year.value};return parseInt(t.day,10)&&parseInt(t.month,10)&&parseInt(t.year,10)?(e=new Date(t.year,t.month,0),t.month>12&&t.day>e.getDate()?new Date(t.year,11,31):t.month>12?new Date(t.year,11,t.day):t.day>e.getDate()?e:new Date(t.year,t.month-1,t.day)):new Date}function l(e){var t=function(e){return e<=9?"0"+e:e};n.inputs.day.value=t(e.getDate()),n.inputs.month.value=t(e.getMonth()+1),n.inputs.year.value=e.getFullYear()}function c(){o.minDate&&o.focusedDate.getMonth()<=o.minDate.getMonth()&&!(o.focusedDate.getFullYear()>o.minDate.getFullYear())?(o.isPreviousEnabled=!1,n.buttons.previousMonthButton.classList.add("date-picker__button--disabled"),n.buttons.previousMonthButton.setAttribute("tabindex","-1"),n.buttons.previousMonthButton.setAttribute("aria-disabled","true")):(o.isPreviousEnabled=!0,n.buttons.previousMonthButton.classList.remove("date-picker__button--disabled"),n.buttons.previousMonthButton.setAttribute("tabindex","0"),n.buttons.previousMonthButton.removeAttribute("aria-disabled","true"))}function b(e){var t=document.createElement("p");t.setAttribute("class","aria-live-message govuk-visually-hidden"),t.setAttribute("aria-live","assertive"),t.innerText=e,n.ariaLiveMessage=t,n.dialog.appendChild(n.ariaLiveMessage)}function h(){var e,t;if(n.ariaLiveMessage)for(e=n.dialog.querySelectorAll(".aria-live-message"),t=0;t<e.length;t++)n.dialog.removeChild(e[t])}function g(){o.maxDate&&o.focusedDate.getMonth()>=o.maxDate.getMonth()&&!(o.focusedDate.getFullYear()<o.maxDate.getFullYear())?(o.isNextEnabled=!1,n.buttons.nextMonthButton.classList.add("date-picker__button--disabled"),n.buttons.nextMonthButton.setAttribute("tabindex","-1"),n.buttons.nextMonthButton.setAttribute("aria-disabled","true")):(o.isNextEnabled=!0,n.buttons.nextMonthButton.classList.remove("date-picker__button--disabled"),n.buttons.nextMonthButton.setAttribute("tabindex","0"),n.buttons.nextMonthButton.removeAttribute("aria-disabled","true"))}function D(e){o.minDate&&S(e)?o.focusedDate=new Date(o.minDate.getFullYear(),o.minDate.getMonth(),o.minDate.getDate()):o.maxDate&&Y(e)?o.focusedDate=new Date(o.maxDate.getFullYear(),o.maxDate.getMonth(),o.maxDate.getDate()):o.focusedDate=e,o.nextMonth=d(),o.previousMonth=r()}function f(e){o.days[e].element.setAttribute("tabindex","0"),o.days[e].element.focus(),h()}function y(){var e,t,a,n,i=new Date(o.focusedDate.getFullYear(),o.focusedDate.getMonth()+1,0).getDate(),s=new Date(o.previousMonth.getFullYear(),o.previousMonth.getMonth()+1,0).getDate(),d=new Date(new Date(o.focusedDate).setDate(1)).getDay()+1,r=7-new Date(o.focusedDate.getFullYear(),o.focusedDate.getMonth()+1,0).getDay()-1;for(o.days=[],e=d;e>0;e--)o.days.push(T({day:s-e+1,month:o.previousMonth.getMonth(),year:o.previousMonth.getFullYear()}));for(t=1;t<=i;t++)o.days.push(T({day:t,month:o.focusedDate.getMonth(),year:o.focusedDate.getFullYear()}));for(a=1;a<=r;a++)o.days.push(T({day:a,month:o.nextMonth.getMonth(),year:o.nextMonth.getFullYear()}));for(n=0;n<o.days.length;n++)o.days[n].index=n}function p(){o.isOpen=!0,n.dialog.classList.remove("date-picker__dialog--hidden")}function m(){o.isOpen=!1,n.dialog.classList.add("date-picker__dialog--hidden"),n.buttons.revealButton.focus()}function v(){o.focusedDate=o.nextMonth,o.nextMonth=d(),o.previousMonth=r()}function M(){o.focusedDate=new Date(o.previousMonth.getFullYear(),o.previousMonth.getMonth()+1,0),o.nextMonth=d(),o.previousMonth=r()}function x(){var e,t,i,s,d,r,u,l,c,h,g,D,f,y,p,m="date-picker-label-"+Math.floor(100*Math.random()+1);function v(e,t){var a=document.createElement(e);return t&&Object.keys(t).forEach((function(e){a.setAttribute(e,t[e])})),a}for(i=v("div",{class:"date-picker__dialog date-picker__dialog--hidden",role:"dialog","aria-modal":"true",tabindex:"-1"}),e=v("button",{class:"date-picker__button__close",type:"button",value:"close"}),l=v("button",{type:"button",class:"date-picker__button__previous-month"}),t=v("div",{class:"date-picker__container"}),c=v("button",{class:"govuk-link date-picker__reveal",type:"button"}),s=v("div",{class:"date-picker__header govuk-clearfix"}),u=v("button",{type:"button",class:"date-picker__button__next-month"}),d=v("h2",{id:m,class:"date-picker__heading","aria-live":"assertive","aria-atomic":!0}),h=v("table",{class:"date-picker__date-table",role:"presentation","aria-labelledby":m}),D=v("thead"),g=v("tbody"),r=v("tr"),y=0,p=a[o.language].days.length;y<p;y++)(f=v("th")).setAttribute("scope","col"),f.setAttribute("abbr",a[o.language].days[y]),f.setAttribute("aria-label",a[o.language].days[y]),f.innerText=a[o.language].dayAbbr[y],r.appendChild(f);c.innerHTML=a[o.language].buttons.dialogTrigger,e.innerHTML=a[o.language].buttons.close,u.innerHTML=a[o.language].aria.nextMonth,l.innerHTML=a[o.language].aria.previousMonth,D.appendChild(r),h.appendChild(D),h.appendChild(g),s.appendChild(l),s.appendChild(d),s.appendChild(u),i.appendChild(s),i.appendChild(h),i.appendChild(e),t.appendChild(c),t.appendChild(i),n.container.appendChild(t),n.buttons={revealButton:c,previousMonthButton:l,nextMonthButton:u,closeButton:e},n.table={container:h,head:D,body:g},n.dialog=i,n.heading=d,b("")}function k(){document.addEventListener("focus",w,!0),document.body.addEventListener("mousedown",E,!0),n.dialog.addEventListener("keydown",_,!0),n.buttons.revealButton.addEventListener("click",C,!0),n.buttons.revealButton.addEventListener("keydown",C,!0),n.buttons.nextMonthButton.addEventListener("click",I,!0),n.buttons.nextMonthButton.addEventListener("keydown",I,!0),n.buttons.previousMonthButton.addEventListener("click",A,!0),n.buttons.previousMonthButton.addEventListener("keydown",A,!0),n.buttons.closeButton.addEventListener("click",L,!0),n.buttons.closeButton.addEventListener("keydown",L,!0)}function w(e){o.isOpen&&e.target!==n.dialog&&!n.dialog.contains(e.target)&&(e.stopPropagation(),n.dialog.focus())}function E(e){o.isOpen&&e.target!==n.dialog&&!n.dialog.contains(e.target)&&(o.isOpen=!1,n.dialog.classList.add("date-picker__dialog--hidden"))}function _(e){o.isOpen&&e.keyCode===t.ESC&&m()}function L(e){var a=!1;switch(e.type){case"keydown":switch(e.keyCode){case t.ESC:case t.ENTER:case t.SPACE:m(),a=!0}break;case"click":m(),a=!0}a&&(e.stopPropagation(),e.preventDefault())}function C(e){var a=!1;function n(){D(u()),p(),H(),a=!0}switch(e.type){case"keydown":switch(e.keyCode){case t.ESC:case t.ENTER:case t.SPACE:n()}break;case"click":n()}a&&(e.stopPropagation(),e.preventDefault())}function A(e){var i=!1;function d(){o.isPreviousEnabled?(M(),H(),n.buttons.previousMonthButton.focus()):(h(),b(a[o.language].aria.dayInPast+" "+s(o.minDate)),n.dialog.focus()),i=!0}switch(e.type){case"keydown":switch(e.keyCode){case t.ESC:case t.ENTER:case t.SPACE:d()}break;case"click":d()}i&&(e.stopPropagation(),e.preventDefault())}function I(e){var i=!1;function d(){o.isNextEnabled?(v(),H(),n.buttons.nextMonthButton.focus()):(h(),b(a[o.language].aria.dayInFuture+" "+s(o.maxDate)),n.dialog.focus()),i=!0}switch(e.type){case"keydown":switch(e.keyCode){case t.ESC:case t.ENTER:case t.SPACE:d()}break;case"click":d()}i&&(e.stopPropagation(),e.preventDefault())}function F(e){var i,d,r=this,u=!1;function c(){r.isDisabled?r.isDisabled&&r.isAfterMaxDate?(h(),b(a[o.language].aria.dayInFuture+" "+s(o.maxDate)),n.dialog.focus()):r.isDisabled&&r.isBeforeMinDate&&(h(),b(a[o.language].aria.dayInPast+" "+s(o.minDate)),n.dialog.focus()):(l(r.date),m()),u=!0}function g(){for(var e=0;e<o.days.length;e++)o.days[e].element.setAttribute("tabindex","-1")}switch(e.type){case"keydown":switch(e.keyCode){case t.ESC:m(),u=!0;break;case t.ENTER:case t.SPACE:c();break;case t.LEFT:i=r.index-1,(d=o.days[i])?d.isDisabled||d.isInPreviousMonth?!d.isDisabled&&d.isInPreviousMonth?(g(),f(i),M(),H()):(h(),b(a[o.language].aria.dayInPast+" "+s(o.minDate))):(g(),f(i),o.focusedDate=d):(M(),H()),u=!0;break;case t.RIGHT:!function(){var e=r.index+1,t=o.days[e];t?t.isDisabled||t.isInNextMonth?!t.isDisabled&&t.isInNextMonth?(v(),g(),f(e),H()):(h(),b(a[o.language].aria.dayInFuture+" "+s(o.maxDate))):(g(),f(e),o.focusedDate=t):(v(),H()),u=!0}();break;case t.UP:!function(){var e=r.index-7,t=o.days[e];t?t.isDisabled||t.isInPreviousMonth?!t.isDisabled&&t.isInPreviousMonth?(M(),g(),f(e),H()):(h(),b(a[o.language].aria.dayInPast+" "+s(o.minDate))):(g(),f(e),o.focusedDate=t):(M(),H()),u=!0}();break;case t.DOWN:!function(){var e=r.index+7,t=o.days[e];t?t.isDisabled||t.isInNextMonth?!t.isDisabled&&t.isInNextMonth?(v(),g(),f(e),H()):(h(),b(a[o.language].aria.dayInFuture+" "+s(o.maxDate))):(g(),f(e),o.focusedDate=t):(v(),H()),u=!0}();break;case t.TAB:}break;case"click":c()}u&&(e.stopPropagation(),e.preventDefault())}function P(){n.heading.innerHTML=a[o.language].months[o.focusedDate.getMonth()]+" "+o.focusedDate.getFullYear()}function B(){var e,t,a,i,s=1,d=1;for(n.table.body.innerHTML="";++s<8;)for(e=n.table.body.insertRow(-1),a=0;a<7;a++)(t=document.createElement("td")).classList.add("dateCell"),o.days[d]&&(t.appendChild(o.days[d].element),e.appendChild(t)),d++;for(i=0;i<o.days.length;i++)o.days[i].element.setAttribute("tabindex","-1"),O(o.days[i].date,o.focusedDate)&&f(o.days[i].index)}function T(e){var t={element:document.createElement("button"),date:new Date(e.year,e.month,e.day),isDisabled:!1,isToday:!1,isInCurrentMonth:!1,isInPreviousMonth:!1,isInNextMonth:!1,isAfterMaxDate:!1,isBeforeMinDate:!1};return t.element.setAttribute("type","button"),t.element.setAttribute("tabindex","-1"),t.element.setAttribute("data-test-id",t.date.toLocaleDateString()),t.element.setAttribute("aria-label",a[o.language].days[t.date.getDay()]+", "+s(t.date)),t.element.innerHTML=t.date.getDate(),t.element.classList.add("date__button"),t.date.getMonth()===o.focusedDate.getMonth()&&t.date.getFullYear()===o.focusedDate.getFullYear()?(t.isInCurrentMonth=!0,t.element.classList.remove("date__button--inactive")):(t.isInCurrentMonth=!1,t.element.classList.add("date__button--inactive")),t.isInCurrentMonth||(t.date>o.focusedDate?t.isInNextMonth=!0:t.isInPreviousMonth=!0),o.maxDate||o.minDate?o.maxDate&&Y(t.date)?(t.isDisabled=!0,t.isAfterMaxDate=!0,t.element.classList.add("date__button--disabled"),t.element.setAttribute("aria-disabled","true")):o.minDate&&S(t.date)?(t.isDisabled=!0,t.isBeforeMinDate=!0,t.element.classList.add("date__button--disabled"),t.element.setAttribute("aria-disabled","true")):(t.isDisabled=!1,t.element.classList.remove("date__button--disabled"),t.element.removeAttribute("aria-disabled","true")):(t.isDisabled=!1,t.element.classList.remove("date__button--disabled"),t.element.removeAttribute("aria-disabled","true")),O(t.date,new Date)?(t.isToday=!0,t.element.classList.add("date__button--today")):(t.isToday=!1,t.element.classList.remove("date__button--today")),t.element.addEventListener("click",F.bind(t),this),t.element.addEventListener("keydown",F.bind(t),this),t}function S(e){return N(e)<N(o.minDate)}function Y(e){return N(e)>N(o.maxDate)}function N(e){var t=new Date(e);return t.setHours(0,0,0,0),t}function O(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function H(){y(),B(),P(),c(),g()}x(),P(),k()};return t=t.default}()}));
